{% extends 'base.html' %}
{% block content %}
    <h1>Pet Details</h1>
    <div class="row">
        <div class="col s6">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">{{ pet.name }}</span>
                    <p> Species: {{ pet.species }}</p>
                    <p> Breed: {{ pet.breed }}</p>
                    <p> Description: {{ pet.description }}</p>
                    {% if pet.age > 0 %}
                        <p>Age: {{ pet.age }}</p>
                        {% else %}
                        <p>This pet is small than 1 year. Please take care of it.</p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="col s6">
            <form method="post" action="{% url 'add_feeding' pet.id %}">
                {% csrf_token %}
                {{ feeding_form.as_p }}
                <input type="submit" class="btn" value="Add Feeding">
            </form>
            <br>
            {% if pet.fed_for_today %}
                <div class="card-panel teal-text center-align">{{ pet.name }} has been fed all meals for today</div>
            {% else %}
                <div class="card-panel red-text center-align">{{ pet.name }} might be hungry</div>
            {% endif %}
            <table class="striped">
                <thead>
                    <tr><th>Date</th><th>Meal</th></tr>
                </thead>
                <tbody>
                    {% for feeding in pet.feeding_set.all %}
                        <tr>
                            <td>{{ feeding.date }}</td>
                            <td>{{ feeding.get_meal_display }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

<script>
    const dateEl = document.getElementById('id_date');
    M.Datepicker.init(dateEl, {
    format: 'yyyy-mm-dd',
    defaultDate: new Date(),
    setDefaultDate: true,
    autoClose: true
    });

    const selectEl = document.getElementById('id_meal');
    M.FormSelect.init(selectEl);
</script>
{% endblock content %}